{% extends 'base.html' %}
{% load i18n %}

{% block page_title %}{% trans "List of FAQs" %}{% endblock %}


{% block content %}
    <h1>{% trans "List of FAQs" %}</h1>

    <dl>
    {% for question in questions %}
      <dt>{{ question.text }}</dt>
      <dd class="answer">{{ question.answer }}</dd>
    {% endfor %}
    </dl>

  <dl class="flat_content" id="faq_list">
    {% for question in questions %}
      <dt id="{{ object.slug }}" class="faq faq-domanda"><a href="#{{ object.slug_en }}">{{ object.domanda_en }} <i class="icon-chevron-down"></i></a></dt>
      <dd class="faq-risposta">{{ object.risposta_en|safe }}</dd>
    {% endfor %}
  </dl>

  {% block js_script %}
    {{ block.super }}
    <script type='text/javascript'>//<![CDATA[
      $(window).load(function() {
        jQuery('.faq-risposta').hide();
        jQuery('.faq-domanda').css('cursor', 'pointer').on('click', function() {
          var self = jQuery(this);
          jQuery('.faq-risposta').each(function() {
            jQuery(this).prev().is(self) ? jQuery(this).toggle() : jQuery(this).hide();
          });
          if (self.next().is(':visible')) {
            location.href = '#' + self.closest('.faq').attr('id');
          }
        });

        hash = location.hash.replace('#', '');
        if (hash) {
            $('body').find('#' + hash + ' .faq-domanda').trigger('click');
        } else {
            // first question is highlighted by default
            $('body').find('#cosa-ce-opencoesione .faq-domanda').trigger('click');
        }
      });//]]>
    </script>
  {% endblock %}

{% endblock %}