{% extends 'base.html' %}

{% load i18n %}
{% load icons %}
{% load humanize %}
{% load search_utils %}
{% load staticfiles %}

{% block header %}
    {% if search_facets %}
    <div class="container">
        <div id="main-title">
            <h1>{% trans 'Projects' %}: {% for facet, term in search_facets %}{{ term }}{% if not forloop.last %}, {% endif %}{% endfor %}</h1>
        </div>
    </div>
    {% endif %}
{% endblock %}

{% block content %}
<div class="container">
    <div class="row">
        <div class="col-md-8">

            <div class="col-md-6 ordering pull-left">
                <div class="form-group">
                    <div class="col-md-4 twelve no-pad"><strong>Ordina le iniziative per</strong></div>
                    <div class="col-md-8  no-pad">
                        <ul class="nav navbar-nav ">
                            <li><a href="#" class="dropdown-toggle" data-toggle="dropdown">RILEVANZA <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    <li><a href="#">Action</a></li>
                                    <li><a href="#">Action</a></li>
                                </ul>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>

            <ul class="pagination pull-right">
                <li><a href="#">&laquo;</a></li>
                <li><a href="#">1</a></li>
                <li><a href="#">2</a></li>
                <li><a href="#">3</a></li>
                <li><a href="#">4</a></li>
                <li><a href="#">5</a></li>
                <li><a href="#">&raquo;</a></li>
            </ul>
        </div>
    </div>
</div>

<div class="container">
    <div class="row">
        <div class="col-md-8">
            <div class="progetti">
                <div class="bordered-radius" style="overflow:hidden;">
                    <ul class="list-unstyled">
                        {% for result in page.object_list %}
                        <li>
                            {% include 'snippets/project_element.html' with project=result.object %}
                        </li>
                        {% endfor %}
                    </ul>
                    <a href="#" class="read-more pull-right pad">VEDI TUTTE LE INIZIATIVE <span class="fa fa-align-justify"> </span></a>
                </div>
            </div>
            <div class="ordering">
                <div class="form-group">
                    <div class="col-md-4 twelve no-pad"><strong>Ordina le iniziative per</strong></div>
                    <div class="col-md-8  no-pad">
                        <ul class="nav navbar-nav ">
                            <li><a href="#" class="dropdown-toggle" data-toggle="dropdown">RILEVANZA <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    <li><a href="#">Action</a></li>
                                    <li><a href="#">Action</a></li>
                                </ul>
                            </li>
                        </ul>
                    </div>
                </div>
                <ul class="pagination pull-right">
                    <li><a href="#">&laquo;</a></li>
                    <li><a href="#">1</a></li>
                    <li><a href="#">2</a></li>
                    <li><a href="#">3</a></li>
                    <li><a href="#">4</a></li>
                    <li><a href="#">5</a></li>
                    <li><a href="#">&raquo;</a></li>
                </ul>
            </div>
        </div>
        <div class="col-md-4">
            <section class="filters">
                <div class="filter-labels">CERCA</div>
                <div class="filter-content">
                    <form class="form-inline" role="form">
                        <div class="form-group has-feedback eleven">
                            <label class="sr-only" for="exampleInputEmail2">Email address</label>
                            <input type="email" class="form-control" id="exampleInputEmail2" placeholder="Una parola chiave nel nome">
                            <span class="fa fa-times form-control-feedback"></span>
                        </div>
                        <div class="form-group has-feedback eleven">
                            <label class="sr-only" for="exampleInputPassword2">Password</label>
                            <input type="password" class="form-control" id="exampleInputPassword2" placeholder="Un'area geografica">
                            <span class="fa fa-times form-control-feedback"></span>
                        </div>
                        <button type="submit" class="btn btn-aid btn-inline">cerca <span class="fa fa-search"></span></button>
                        <div class="checkbox">
                            <label class="eleven">
                                <input type="checkbox"> CERCA TRA I RISULTATI
                            </label>
                        </div>
                    </form>
                </div>
            </section>

            <section class="filters">
                <div class="filter-labels">FILTRA</div>
                <div class="filter-content">

                    <p class="lead"><strong>{{ n_results }}</strong> {% trans "Search result" %}</p>

                    <h4>MODIFICA I FILTRI <small class="pull-right eleven">{% trans "Remove filters" %} <a href="{% url 'projects:search' %}">{% icon 'times' %}</a></small></h4>
                    <div class="edit-filters">
                        <p class="eleven no-marg-all filter-typology">TIPOLOGIA</p>
                        <span class="eleven">Tipologia Lorem ipsum <a class="fa fa-times"> </a></span>
                    </div>
                    <h4>Fondi impegnati</h4>
                    <img src="{% static 'img/layout/finanziamenti.jpg' %}">
                    <div class="small-spacer"> </div>

                    <h4>SETTORE DI INTERVENTO</h4>
                    {% show_facets 'sectors' %}

                    <div class="small-spacer"> </div>
                    <h4>CANALE DI FINANZIAMENTO</h4>
                    {% show_facets 'channels' %}

                    <div class="small-spacer"> </div>
                    <h4>TIPOLOGIA</h4>
                    {% show_facets 'aid_types' %}

                    <div class="small-spacer"> </div>
                    <h4>ANNO</h4>
                    {% show_facets 'years' %}

                    <div class="small-spacer"> </div>
                    <h4>TIPO DI FINANZIAMENTO</h4>
                    {% show_facets 'finance_types' %}

                    <div class="small-spacer"> </div>
                    <h4>Agenzie</h4>
                    {% show_facets 'agencies' %}
                </div>
            </section>
        </div>
    </div><!-- /.row -->
</div><!-- /.container -->

<div class="row">

    <div id="content" class="col-sm-8 col-md-8">


        <p class="h4">
            <strong>{{ n_results }}</strong> {% trans "Search result" %}
        </p>
        <ul class="list-unstyled main-list">
            {% for result in page.object_list %}
            <li class="media">
                {% include 'snippets/project_element.html' with project=result.object %}
{#                {{ result.object }}#}
            </li>
            {% endfor %}
        </ul>

        {% if page.has_previous or page.has_next %}
        <ul class="pagination">
            {% if page.has_previous %}
                <li><a href="{% search_url_page page.previous_page_number %}"><i class="fa fa-chevron-left"></i> {% trans "Previous" %}</a></li>
            {% endif %}
            {% if page.has_next %}
            <li><a href="{% search_url_page page.next_page_number %}">{% trans "Next" %} <i class="fa fa-chevron-right"></i></a></li>
            {% endif %}
        </ul>
        {% endif %}

        <hr class="striped">

    </div>

    <aside id="sidebar" class="col-sm-4 col-md-4">

        <hr class="striped">

        <div class="box search">
            <h3 class="title">
                {% trans "Search" %}
            </h3>

        </div>

        <hr class="no-border">

        <div class="box filters">

            <h3 class="title">
                {% trans "Filter" %}
            </h3>

            <h4>{% trans "Year" %}</h4>
            {% show_facets 'years' %}
            <h4>Settore di intervento</h4>
            {% show_facets 'sectors' %}
            <h4>Canali di finanziamento</h4>
            {% show_facets 'channels' %}
            <h4>Tipologia</h4>
            {% show_facets 'aid_types' %}
            <h4>{% trans "Agencies" %}</h4>
            {% show_facets 'agencies' %}
            <h4>{% trans "Finance type" %}</h4>
            {% show_facets 'finance_types' %}

            <a href="{% url 'projects:search' %}" class="btn btn-link btn-xs round-none red pull-right">{% trans "Remove filters" %}<i class="fa fa-times"></i></a>
        </div>

        <hr class="no-border">

        <div class="box orderby">
            <h3 class="title">
                {% trans "Order" %}
            </h3>
            <ul class="list-unstyled">
                {% for choice, label in form.order_by.field.choices %}
                <li{% if choice == order_by %} class="active"{% endif %}><a href="{% search_url_order choice %}"><span class="fa fa-check"></span> {{ label }}</a></li>
                {% endfor %}
            </ul>
        </div>

        <hr class="striped">

    </aside>

</div>

{% endblock %}